### 数据科学的元器件

数据科学是由很多互相作用的元件组成，了解它们是如何组织起来的是提高解决数据科学问题的工程能力的关键。

数据科学中包含的成员归结为以下几类：分析的数据类型，使用的分析类型，调用的学习模型，还有进行分析的执行模型。如图《数据科学成员之间的相互关系》所示，成员之间的相互联系使得设计数据科学解决方案非常复杂。对一个成员所做的选择受到其他成员所做选择的影响。例如，数据类型决定了分析类型和学习模型的选取，时效性和算法并行化在后续会对执行模型产生影响。随着对数据科学技术领域研究的深入，我们开始探索这些成员，并探讨每个成员的例子。

----
__快速简略了解：__

当设计一个数据科学解决方案时，你应该首先从理解那些定义解空间的成员开始。不论你的分析目标是什么，你应该考虑如下的事情：使用何种数据类型，用来生成数据产品的分析类型，选用的学习模型是怎么计算和优化的，管理分析是如何执行模型的。只有在考虑了以上方方面面之后，你才会对一个完成的数据科学解决方案有清晰的概念。

----

![](http://i4.piimg.com/7daebf14db7ad077.png)

#### 数据类型(Data Types)

数据类型和分析目标就像小鸡和鸡蛋的关系一样，不清楚先有谁。分析目标来源于商业需求，但是数据类型也影响目标。例如，理解消费者产品认知的商业需求推动了感知分析的分析目标。同样的，感知分析的目标推动了一种如社交媒体内容的类文本数据类型的选择。在设计解决方案的时候，数据类型也推动了许多其他选择。

有很多方法将数据分类。通常将数据分为结构化数据和非结构化数据。当数据的信息具有清晰含义并且高度明确、有序和数字化时，它就是结构化数据。有些结构化数据无法用常规关系型数据库或数据表来存储，但是却带有标签等特征，这样的数据是半结构化的。非结构化数据（比如自然语言文本）没有这么多清晰描述的意义，图像、视频和音频也常归为其中，这种数据要求经过预处理识别和提取有用特征，以便进行索引、训练或聚类。

数据也可以按照产生、收集或者处理的速度进行分类。流数据和批数据之间的区别可以描述成：流数据像消防龙头喷出的水连续，批数据则像是桶装水批量到达。数据类型和数据速度之间鲜有关联，但数据速度对选择的分析执行模型有显著的影响，也可能左右分析类型或者学习模型的选择。

#### 分析方法的类别(Classes of Analytic Techniques)

为对经验领域中可能的分析方法有个概念了解，我们将它们分成九个基本类。注意：一个给定类中的方法可能以多种方式完成不同的分析目标。一个类中分析方法仅仅表示有一种相似的分析功能。这九种分析类如图《分析方法类》所示。 

![](http://i4.piimg.com/81a0d22a72268af8.png)

__转换分析__

- __汇总：__总结数据的方法。这些方法包括基本的统计学（如平均值、标准差），分布拟合，绘图。
- __丰富：__将额外信息加入数据中的方法，比如加入源信息或其他标签。
- 处理：__进行数据清洗、准备和分离的技术。同时也包括常见的预处理方法，如坐标转换和特征提取。

__学习分析__

- __回归：__估计变量之间关系的方法，包括了解哪些变量在预测未知变量时更加重要。
- __聚类：__把数据分到相似的组合中。
- __分类：__有监督地对未知分类的数据进行划分
- __推荐：__基于历史偏好或者行为，对一个新实体预测偏好或者倾向的技术。

__预测分析__

- __仿真__：模拟真实流程或者系统运作的技术。这对在新条件下预测行为很有用。
- __优化__：选取一组元素来使得目标函数最大化的方法。

#### 学习模型

诸如回归、聚类、分类和推荐等这些分析方法都会采用一个预测模型。这些模型着眼于如何训练历史数据来对新数据进行判断。学习模型也描述了它是如何判断和逐步优化的，如图表《分析学习模型》所示。 
![](http://i4.piimg.com/ef5ae858e856e4ec.png)

学习模型常常被分成非监督学习和监督学习。监督学习是模型使用一个带有标记的训练集，其中的每一个元素都有一个已知的类或者种类。模型把训练样例中的标记和特征关联，以便对那些没有标记的样例进行预测。非监督学习没有关于数据将会归为哪些类的先验知识。非监督学习基于特征相似性利用数据集中的特征生成几个组。半监督学习是监督学习和非监督学习的混合，即利用小部分带标记的数据和大量的未标记的数据。非监督学习是为了提高在训练时只有小部分带有标记的观测量可用于学习的时候的学习精度。

有多种不同的方法训练学习模型。一种实用的区分是离线模型和在线模型，离线模型一次训练完成；在线模型逐步训练。许多训练方法有离线和在线变种。选择哪一种取决于分析目标和选取的执行模型。

生成一个离线模型需要一次性应用全体训练集，而改进模型则需要逐步进行。训练出的模型是静态的，他们的预测结果也不会改变，直到后续训练阶段的新模型建立起来。因为这种确定性的特点，离线模型的性能更容易得到评估。运用这个模型到生产环境中只需替换模型即可。

在线模型一直在动态优化，这意味着只需将其单次部署到生产环境中即可。挑战是这些模型不能将所有数据用于训练。这些模型的假设是数据必须基于观察到的样例；这些假设可能不是最理想的。模型预测的反馈可以减轻次优预测的影响。在线模型可以迅速结合反馈改进性能。

离线学习的一种方式叫做强化学习。在这种方式下，算法适应环境，基于函数反馈渐进地学习如何达到目标。强化学习通常用于复杂的、涉及优化的现实世界中的任务，如导航或交易。得益于很多很有前景的强化学习算法结论的公开，这种方法在近几年与深度学习一道迅速得到流行。

----
>强化学习实战

> 《自然》杂志上发表过一份研究表明，计算机可以学会玩49种不同的视频游戏，精度足以与一个专业的游戏测试人员匹敌。强度学习的潜力获得了极大关注。计算机使用原始的屏幕像素和游戏分值作为输入来完成这些学习任务。这种方法代表了第一代能够学习高维感官输入到行为响应之间复杂任务的人工智能。

----
#### 执行模型

执行模型描述了如何处理数据来完成分析任务，他们可能处理高维度问题。执行模型包含在一个组织分析计算程序的执行框架中。从这层意义上看，一个框架可能与一门编程语言运行环境一样简单，如Python解释器，或一个为一门或多门编程语言提供专用API分布式计算框架，如Hadoop或Spark。基于如何处理数据来对执行模型分组很常见（分为批处理或者流处理模型），执行模型的种类如图《分析执行模型所述》。

![](http://i3.piimg.com/ca0ef02e7d40f8ad.png)

批处理模型意味着大批量地分析数据，它分为运行态和非运行态两种状态，这两种状态是在内存中维护的。批处理也意味着分析程序大约几分钟或者更多的频率生成结果。由于批处理相当于离散的几个工作单元，因此对其工作量相当容易掌握，所以，基于数据到来的速度，很容易确定一系列特定的执行步骤和合适的执行频率及时间范围。取决于所选择的算法，批处理模型易于通过并行化得到扩展。有很多支持并行批处理分析操作的框架。最著名的当属Hadoop在其MapReduce框架中提供的分布式批处理执行模型。

与之相反，流处理模型只要数据来了就分析。流处理模型在正常情况下是一直在执行分析任务的。分析一直存在于内存中，并且根据数据到来的时间，以差不多秒级的频率连续生成结果。流处理的很多概念来源于Unix管道设计理念；通过把一个步骤的输出作为下一个的输入，各个步骤都连接起来了。因此，很多开发者对流处理的基本概念都已经很熟悉了。有很多支持并行处理的流分析框架可以使用，如Storm，S4和Samza。

选择批处理还是流处理模型取决于分析延时和实时性要求。延时表示数据到达系统后所需要的分析时间，实时性表示系统给出分析结果平均时间。对很多分析目标，几个小时的延时和数天的实时性是可以接受的，因此，可以选择批处理方法完成。而某些分析目标有秒级的要求，几分钟的实时性就几乎没有价值，因此适合选择流处理方法。

批处理和流处理模型并不是对分析执行方法分类的唯一维度。另一种分类方法是按照可扩展性进行分类，很多时候可通过多台计算机并行计算来完成扩展。某些算法需要大量内存来共享状态，而其他的算法在计算机之间没有共享状态，在构建一个并行分析执行环境的时候，这种区别对软硬件的选择有显著影响。

Tips:为理解流处理的系统能力，我们总结了如下指标：数据消费量，数据生成量以及延时。这将帮助你应对资源紧张的局面。