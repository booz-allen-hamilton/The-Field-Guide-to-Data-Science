### 分析方法选择流程

如果你只专注于数据科学的科学层面，你绝不会成为一位数据艺术家。

数据科学中极重要的一步就是发现一种可得到期望结果的分析方法。有时这显而易见；问题的特征（例如，数据类型）指明了你应该采用的方法。但有时无从下手。由于可能解决问题的分析方法实在太多了，从众多方法中选出一种是一门必须经过训练的艺术。接下来，我们将和您一起进行实践，并为您成为一名数据艺术家保驾护航。

#### 分解问题 

分析方法选择流程的第一步就是把问题分解成易处理的几个部分。为了达到预期效果，要求把多种分析方法整合成一种整体的方案。策划完整的方案要求把问题分解成前后连续的更小的子问题。

__分形分析模型__就是基于上述理念的一种方法。该方法的核心思想是，在任何给定的阶段，分析方法本身是由更小的计算集合组成，这个集合中的元素还可以继续分解。当问题分解的到一定粒度，仅需一种单一的分析方法就可以达到分析目标。问题分解产生了很多子问题，每个子问题都有自己的目标、数据、计算和执行。下图展示问题分解这一概念。

从表面上看，问题分解是一个机械、重复的过程。当然，从概念上讲，这个看法是正确的，不过在解决工程问题的时候，问题分解却是一把利刃。也许有很多不同的方式去分解问题，每个子问题有不同的解决方案。也许很多隐藏的依赖和制约只有在你已经开始寻找解决方案的情况下才会出现，这就是艺术与科学的碰撞。尽管隐藏在问题分解背后的艺术是不可言传的，我们仍然可以提炼一些有用的建议给大家。当你开始分解问题的时候，你可以考虑从如下几个角度入手：

1.建立自然组成的混合分析目标。例如，很多问题对包括探索和预测目标在内的预测未来环境很关注。

2.分析目标的自然排序：例如，在特征抽取的过程中，你需要首先确定候选特征组，然后选取蕴含最大信息量的那些特征。这两个步骤分别来自不同的目标。

3.关注处理过程的数据类型。例如，文本和图像都需要特征抽取。

4.需要人工参与反馈。例如研究预警阈值的时候，你可能需要征求分析员的反馈，基于他们的判断更新阈值。

5.合并数据源。例如，有时我们需要关联两个数据集才能完成更大的目标，往往是一个探索性目标。

问题分解除了提供一种易于实现的分析选择方法，它还具有简化高度复杂问题的好处。分解后的计算过程可以去解决每个子问题，而不必着眼于整体。不过需要注意的是，虽然这一技术有助于数据科学家解决问题，但当它作为完整的端对端解决方案时，必须进行评估。

>__识别域名欺诈__
>
>识别域名欺诈对一个公司来说是特别重要的，这有利于他们维护自己的品牌形象，并免遭客户信任度大打折扣。当用户打开由黑客创建的一个恶意网站、url或者邮箱地址并信以为真时，域名欺诈就发生了。当用户点击这个链接，访问相应网站，或者接收邮件时，他们将遭受某种恶意行为。
>
>![](http://i4.piimg.com/1f082a3de1418345.png)
>
>我们团队曾经为一个商业公司处理过这种问题。从表面上看，解决域名欺诈看起来很简单。只需找到最近注册的域名，检查这些域名与该公司的域名是否有较大相似性。当相似度达到一定阈值，我们便可以对该域名进行警告。但是在分解问题时，主要计算过程很快变得很复杂，我们需要一种判断两个域名相似性的算法。当分解这个相似性算法时，我们主要关注算法复杂度和速度。正如许多与安全相关的问题一样，快速警报的速度是至关重要的，对响应速度的强需求迫使我们重新评估分解识别域欺诈的做法是否适当。

重温分解过程后我们得到一种全新的方法。我们首先算出一个与该公司注册域名相似的域名列表，然后将其与最近注册的域名进行比较。上图展现了问题分解在处理域名欺诈过程中的应用。经测试和初步部署，我们可以在48小时内发现欺诈域名。

#### 实现约束 

在域名欺诈的案例研究中，实现约束迫使我们重新审视最初的做法。这表明分析方法选择并不仅仅意味着选择某种分析技术来实现所期望的结果，同时确保解决方案是可行的。

数据科学家可能遇到各种各样的实现约束。可以将其归纳为5个维度，分别为：分析复杂度，速度，精度，数据大小和数据复杂性。平衡这些维度是一个零和问题，一个解决方案不能同时在所有的五个维度都表现优秀，而是必须在它们之间进行取舍平衡。下图的平衡五维度分析，说明了这种关系。 

>![](http://i2.piimg.com/ddbd5cc03a97aef1.png)
>
>速度：结果生成时延（准实时、小时级、天级）或解决方案的开发、部署时间
>
>分析复杂度：算法复杂度(e.g., complexity class and execution resources)
>
>数据大小：数据集大小（比如数据行数）
>
>数据复杂度：数据类型，数据复杂度需要衡量数据重叠、线性可分、数据维度以及数据集之间的联系。

当问题的某个方面对这些维度的一个或者多个有要求时，就会面临实现约束的问题。数据科学家通常被迫牺牲其他维度来解决某个特定维度。例如，如果需要准实时地给出分析结果，那么对速度维度提出了要求，其他四个维度将被会被迫做出牺牲。了解如何平衡五个维度是一门艺术，同时需要一段时间的训练来完成。

一些实现约束的例子包括：

- 计算频率：一些解决方案可能需要定期执行（例如，每小时），这就要求在指定的时间窗内完成计算。如果不能在要求的时间内完成，那么就算是分析方法特别合适，也是无用的。

- 时效性：有些应用需要准实时地给出分析结果, 要求使用流处理方法。虽然有些算法可以在流计算框架中完成，但是很多其他的算法却不能。

- 实施速度：为了能够快速给出大致的分析结果，我们需要快速开发及部署解决方案。这种情况下，我们可以用一些不太复杂的技术来快速实施及验证结果。

- 计算资源限制：虽然你可能能够存储及分析数据，但是当数据量较大时，一些需要在整个数据集上进行多次计算的算法将会耗费很多资源。这将引领我们去使用一些单次使用数据的算法（例如，选用canopy聚类而不选用kMeans）

- 数据存储限制：有些时候，数据量会变得大到无法保存，或者只能保存一个较短时间窗内的数据。对于那些需要分析很长时间窗内的数据的算法来说，这是不可行的。

政策和监管要求是隐含限制的主要来源，值得简单讨论。针对诸如个人身份信息（PII）或个人健康信息（PHI）这种专门的数据，都有相应的政策限制。尽管现在的技术在一个单一系统中提供各种安全控制，可以安全的存储信息，但是政策强制要求有专门的数据处理考虑，包括有限制的保存周期和数据访问方式。数据限制条件对事先规划的数据大小和复杂度维度有影响。这就造成了必须考虑的另一层限制。